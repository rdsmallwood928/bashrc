#!/bin/bash

# Make brew happy
export PATH="/usr/local/bin:/usr/local/opt/coreutils/libexec/gnubin:${PATH}"
export MANPATH="/usr/local/opt/coreutils/libexec/gnuman:$MANPATH"
pathmunge /usr/local/sbin after
pathmunge /usr/local/share/python after

# Setup GO (if it is there)
if which -s go ; then
  export GOROOT=/usr/local/Cellar/go/1.0.1
  export GOPATH=${HOME}/GoWorkspace
  pathmunge ${HOME}/GoWorkspace/bin after
  pathmunge ${GOROOT}/bin after
fi

alias socks='sudo networksetup -setsocksfirewallproxystate'

# make less more friendly for non-text input files, see lesspipe(1)
eval "$(SHELL=/bin/sh lesspipe.sh)"

# Set up bash completion on OSX
if [[ -f `brew --prefix`/etc/bash_completion ]]; then
  source `brew --prefix`/etc/bash_completion
fi

if [ -z $SSH_AUTH_SOCK ]; then
  ssh-add -K
else
  echo "SSH agent using key in OSX keychain."
fi

function update {
  # Update all teh OSX things.
  updatehome
  sudo softwareupdate -i -a
  if which brew &> /dev/null; then
    brew update
    brew upgrade
    brew cleanup
  fi
  which npm &> /dev/null && npm update npm -g && npm update -g
  which gem &> /dev/null && sudo gem update
}

# Empty the Trash on all mounted volumes and the main HDD
# Also, clear Appleâ€™s System Logs to improve shell startup speed
alias emptytrash="sudo rm -rfv /Volumes/*/.Trashes; sudo rm -rfv ~/.Trash; sudo rm -rfv /private/var/log/asl/*.asl"

# Recursively delete `.DS_Store` files
alias dsclean="find . -type f -name '*.DS_Store' -ls -delete"

